!function(){function e(e,t,n,r,s,i,u){t=t||1,n=n||1,r=r||0,s=s||0,i=i||0,u=u||0;var a=new Date(e,t-1,n,r,s,i,u);return new Time(a)}function t(e,t){function n(e,t){var n,r;return n=s(t),r=n.exec(e),r?(r.shift(),i(r)):null}function r(e){var t,r,s,i;for(t=h.length,r=0;t>r;r++)if(s=h[r],i=n(e,s))return i;return null}function s(e){a=[];var t=e.replace(c,function(e,t){return a.push(t),"(\\d+)"});return t="^"+t+"$",new RegExp(t)}function i(e){var t,n;for(t=e.length,n=0;t>n;n++)e[n]=parseInt(e[n]);return e}function u(e){var t,n,r,s,i={y:null,m:null,d:null,h:null,i:null,s:null,ms:null};for(t=a.length,n=0;t>n;n++)r=a[n],s=e[n],i[r]=s;return new Time(i.y,i.m,i.d,i.h,i.i,i.s,i.ms)}if(!e)return Time.initObject();var a,o,h=["{y}","{y}-{m}","{y}-{m}-{d}","{y}-{m}-{d} {h}","{y}-{m}-{d} {h}:{i}","{y}-{m}-{d} {h}:{i}:{s}","{y}-{m}-{d} {h}:{i}:{s}.{ms}"],c=/\{([^}]+)\}/g;return o=t?n(e,t):r(e),u(o)}Time=function(n,r,s,i,u,a,o){if(this.date=null,this.year=null,this.month=null,this.day=null,this.hour=null,this.hour12=null,this.hour24=null,this.minute=null,this.second=null,this.ms=null,this.stamp=null,void 0===n)this.date=new Date;else switch(n.constructor){case Date:return this.date=n,this.sync(),this;case Number:return e(n,r,s,i,u,a,o);case String:return t(n,r)}},Time.fn=Time.prototype,Duration=function(e,t){this.start=e.clone(),this.end=t.clone(),this.year=null,this.month=null,this.day=null,this.hour=null,this.minute=null,this.second=null,this.ms=null,this.all={year:null,month:null,day:null,hour:null,minute:null,second:null,ms:null},this.sync()},Duration.fn=Duration.prototype,Duration.fn.get=function(e){function t(e,t){var n=t.year-e.year;return e.set("year",t.year),e.isAfter(t)?n-1:n}function n(e,t){if(e.set("year",t.year),e.isEqual(t))return 0;var n;if(e.isBefore(t))for(n=0,e.add("month",1);t.isAfter(e);)n++,e.add("month",1);else for(n=11,e.sub("month",1);e.isAfter(t);)n--,e.sub("month",1);return n}function r(e,t){var n=t.month,r=n-1>0?n-1:12,s=t.day-e.day;return s>=0?s:2===r?t.isLeapYear()?29+s:28+s:o[r]+s}var s,i=this.start.clone(),u=this.end.clone();if(i.isAfter(u))return 0;var a=u.stamp-i.stamp,o=[null,31,null,31,30,31,30,31,31,30,31,30,31],h={Second:1e3,Minute:6e4,Hour:36e5,Day:864e5};switch(e){case"year":s=t(i,u);break;case"month":s=n(i,u);break;case"day":s=r(i,u);break;case"hour":s=Math.floor(a%h.Day/h.Hour);break;case"minute":s=Math.floor(a%h.Hour/h.Minute);break;case"second":s=Math.floor(a%h.Minute/h.Second);break;case"ms":s=Math.floor(a%h.Second)}return s>=0?s:0},Duration.fn.getAll=function(e){var t=this.start.clone(),n=this.end.clone();if(t.isAfter(n))return 0;var r=n.stamp-t.stamp,s={Second:1e3,Minute:6e4,Hour:36e5,Day:864e5};switch(e){case"year":return this.year;case"month":return 12*this.year+this.month;case"day":return Math.floor(r/s.Day);case"hour":return Math.floor(r/s.Hour);case"minute":return Math.floor(r/s.Minute);case"second":return Math.floor(r/s.Second);case"ms":return r}},Duration.fn.sync=function(){return this.year=this.get("year"),this.month=this.get("month"),this.day=this.get("day"),this.hour=this.get("hour"),this.minute=this.get("minute"),this.second=this.get("second"),this.ms=this.get("ms"),this.all.year=this.getAll("year"),this.all.month=this.getAll("month"),this.all.day=this.getAll("day"),this.all.hour=this.getAll("hour"),this.all.minute=this.getAll("minute"),this.all.second=this.getAll("second"),this.all.ms=this.getAll("ms"),this},Duration.fn.toString=function(e){e=e||"{Y}-{M}-{D} {H}:{I}:{S}.{MS}";var t=this,r=/\{([^}]+)\}/g;return e.replace(r,function(e,r){switch(r){case"Y":return n(t.year,2);case"M":return n(t.month,2);case"D":return n(t.day,2);case"H":return n(t.hour,2);case"I":return n(t.minute,2);case"S":return n(t.second,2);case"MS":return n(t.ms,3);case"y":return t.year%100;case"m":return t.month;case"d":return t.day;case"h":return t.hour;case"i":return t.minute;case"s":return t.second;case"ms":return t.ms;case"all.y":return t.all.year;case"all.m":return t.all.month;case"all.d":return t.all.day;case"all.h":return t.all.hour;case"all.i":return t.all.minute;case"all.s":return t.all.second;case"all.ms":return t.all.ms}})};var n=function(e,t){var n,r;for(e=e.toString(),n=t-e.length,r=0;n>r;r++)e="0"+e;return e};Time.now=function(){return new Time(new Date)},Time.today=function(){return Time.now().set("hour",0).set("minute",0).set("second",0).set("ms",0)},Time.fn.add=function(e,t){return t=t||1,t=this.get(e)+t,this.set(e,t)},Time.fn.age=function(){var e=Time.now();return this.durationTo(e).get("year")},Time.fn.clone=function(){return new Time(this.year,this.month,this.day,this.hour,this.minute,this.second,this.ms)},Time.fn.daysIn=function(e){var t,n;switch(e){case"year":t=new Time(this.year),n=new Time(this.year+1);break;case"month":t=new Time(this.year,this.month),n=t.clone().add("month",1)}return t.durationTo(n).getAll("day")},Time.fn.durationTo=function(e){return new Duration(this,e)},Time.fn.get=function(e){var t=this.date;if("ms"===e)return t.getTime()-Date.parse(t);switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate();case"hour":return t.getHours();case"hour12":return t.getHours()>12?t.getHours()-12:t.getHours();case"hour24":return t.getHours();case"minute":return t.getMinutes();case"second":return t.getSeconds();case"stamp":return t.getTime()}},Time.fn.isAM=function(){return this.hour<12},Time.fn.isAfter=function(e){return"string"==typeof e&&(e=new Time(e)),this.stamp>e.stamp},Time.fn.isBefore=function(e){return"string"==typeof e&&(e=new Time(e)),this.stamp<e.stamp},Time.fn.isBetween=function(e,t){return"string"==typeof e&&(e=new Time(e)),"string"==typeof t&&(t=new Time(t)),this.isAfter(e)&&this.isBefore(t)},Time.fn.isEqual=function(e){return"string"==typeof e&&(e=new Time(e)),this.stamp===e.stamp},Time.fn.isLeapYear=function(){var e=this.year;return e%4===0&&e%100!==0||e%400===0},Time.fn.isPM=function(){return this.hour>=12},Time.fn.log=function(){return console&&console.log&&console.log(this.toString()),this},Time.fn.set=function(e,t){var n=this.date;if("ms"===e){var r=Date.parse(n)+t;n.setTime(r)}else switch(e){case"year":n.setFullYear(t);break;case"month":n.setMonth(t-1);break;case"day":n.setDate(t);break;case"hour":n.setHours(t);break;case"minute":n.setMinutes(t);break;case"second":n.setSeconds(t);break;case"stamp":n.setTime(t)}return this.sync(),this},Time.fn.sub=function(e,t){return t=t||1,t=this.get(e)-t,this.set(e,t)},Time.fn.sync=function(){return this.year=this.get("year"),this.month=this.get("month"),this.day=this.get("day"),this.hour=this.get("hour"),this.hour12=this.get("hour12"),this.hour24=this.get("hour24"),this.minute=this.get("minute"),this.second=this.get("second"),this.ms=this.get("ms"),this.stamp=this.get("stamp"),this},Time.fn.toString=function(e){e=e||"{Y}-{M}-{D} {H24}:{I}:{S}.{MS}";var t=this,r=/\{([^}]+)\}/g;return e.replace(r,function(e,r){switch(r){case"Y":return t.year;case"M":return n(t.month,2);case"D":return n(t.day,2);case"H":return n(t.hour,2);case"H24":return n(t.hour24,2);case"H12":return n(t.hour12,2);case"I":return n(t.minute,2);case"S":return n(t.second,2);case"MS":return n(t.ms,3);case"y":return t.year%100;case"m":return t.month;case"d":return t.day;case"h":return t.hour;case"h24":return t.hour24;case"h12":return t.hour12;case"i":return t.minute;case"s":return t.second;case"ms":return t.ms}})}}();